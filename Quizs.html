<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quizs & Juegos - ComicVerse</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --orange-cr: #F47521; 
            --dark-bg: #000000;
        }
        body {
            background-color: var(--dark-bg);
            color: white;
            font-family: 'Segoe UI', sans-serif;
            overflow-x: hidden;
        }

        /* --- Scrollbar Personalizado --- */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #111; }
        ::-webkit-scrollbar-thumb { background: var(--orange-cr); border-radius: 4px; }
        
        .hide-scroll::-webkit-scrollbar { display: none; }
        .hide-scroll { -ms-overflow-style: none; scrollbar-width: none; }

        /* --- Efecto 3D Portada --- */
        .game-card-container { perspective: 1000px; }
        .game-card {
            background: #111; border: 1px solid #333; border-radius: 16px; overflow: hidden;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); transform-style: preserve-3d; position: relative;
        }
        .game-card-container:hover .game-card {
            transform: translateY(-8px) rotateX(3deg);
            box-shadow: 0 15px 30px rgba(244, 117, 33, 0.25); border-color: var(--orange-cr);
        }

        /* --- Imágenes Cuadradas --- */
        .game-img-box { width: 100%; aspect-ratio: 1/1; position: relative; overflow: hidden; }
        .game-img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; }
        .game-card:hover .game-img { transform: scale(1.1); }

        /* --- Modal Detalles --- */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(8px); display: flex; align-items: center; justify-content: center; z-index: 60; opacity: 0; pointer-events: none; transition: 0.3s; }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }
        .modal-box { background: #151515; border: 1px solid #333; border-radius: 12px; padding: 2rem; width: 90%; max-width: 500px; position: relative; transform: scale(0.9); transition: 0.3s; box-shadow: 0 0 50px rgba(244,117,33,0.1); }
        .modal-overlay.active .modal-box { transform: scale(1); }

        /* --- Game Viewer (Iframe 1216x1216 Adaptable) --- */
        .game-viewer-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: 0.3s;
        }
        .game-viewer-overlay.active { opacity: 1; pointer-events: auto; }
        
        .game-frame-container {
            /* Dimensiones Base Solicitadas */
            width: 100%; 
            max-width: 1216px; 
            
            /* Mantener aspecto cuadrado 1:1 */
            aspect-ratio: 1 / 1; 
            
            /* Ajuste responsivo para móvil: No pasar del alto de pantalla menos márgenes */
            max-height: 90vh; 
            
            background: #000; border: 2px solid var(--orange-cr);
            border-radius: 12px; position: relative; overflow: hidden;
            box-shadow: 0 0 50px rgba(244,117,33,0.3);
        }
        
        .game-iframe { width: 100%; height: 100%; border: none; }
        
        .close-game-btn {
            position: absolute; top: 10px; right: 10px; width: 40px; height: 40px;
            background: red; color: white; border-radius: 50%; border: 2px solid white;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; cursor: pointer; z-index: 20; box-shadow: 0 0 10px red;
            font-size: 1.2rem;
        }

        /* --- Slider Horizontal --- */
        .games-slider {
            display: flex; gap: 24px; overflow-x: auto; padding: 20px 0;
            scroll-snap-type: x mandatory;
        }
        .slider-item {
            min-width: 280px; max-width: 320px; flex-shrink: 0; scroll-snap-align: center;
        }
    </style>
</head>
<body class="relative min-h-screen pb-20">

    <div class="p-4 md:p-8 max-w-7xl mx-auto">
        
        <!-- HEADER -->
        <div class="flex items-center gap-3 mb-6 border-b border-gray-800 pb-6">
            <div class="w-2 h-12 bg-gradient-to-b from-[#F47521] to-purple-600 shadow-[0_0_20px_#F47521]"></div>
            <div>
                <h1 class="text-4xl md:text-5xl font-black italic uppercase tracking-tighter text-white drop-shadow-xl">
                    Quizs & <span class="text-transparent bg-clip-text bg-gradient-to-r from-[#F47521] to-purple-500">Juegos</span>
                </h1>
                <p class="text-gray-500 text-sm mt-1">
                    Diversión arcade y retos de conocimiento.
                </p>
            </div>
        </div>

        <!-- SLIDER HORIZONTAL DE JUEGOS -->
        <div class="games-slider hide-scroll">

            <!-- JUEGO 1 -->
            <div class="slider-item game-card-container group">
                <div class="game-card" id="card-1">
                    <div class="game-img-box">
                        <img src="Quiz1.png" onerror="this.src='https://placehold.co/1024x1024/111/F47521?text=Avalond+RPG'" class="game-img">
                    </div>
                    <div class="p-4 bg-[#0a0a0a]">
                        <h3 class="text-lg font-black text-white uppercase italic truncate">Avalond: RPG</h3>
                        <button onclick="openDetailModal(1)" class="w-full mt-3 bg-gray-800 hover:bg-[#F47521] hover:text-black text-white font-bold py-2 rounded uppercase text-xs tracking-widest transition">
                            Jugar
                        </button>
                    </div>
                </div>
            </div>

            <!-- JUEGO 2 -->
            <div class="slider-item game-card-container group">
                <div class="game-card" id="card-2">
                    <div class="game-img-box">
                        <img src="Quiz2.png" onerror="this.src='https://placehold.co/1024x1024/111/F47521?text=Quiz+Trivia'" class="game-img">
                    </div>
                    <div class="p-4 bg-[#0a0a0a]">
                        <h3 class="text-lg font-black text-white uppercase italic truncate">Trivia Otaku</h3>
                        <button onclick="openDetailModal(2)" class="w-full mt-3 bg-gray-800 hover:bg-[#F47521] hover:text-black text-white font-bold py-2 rounded uppercase text-xs tracking-widest transition">Jugar</button>
                    </div>
                </div>
            </div>

            <!-- JUEGO 3 -->
            <div class="slider-item game-card-container group">
                <div class="game-card" id="card-3">
                    <div class="game-img-box">
                        <img src="Quiz3.png" onerror="this.src='https://placehold.co/1024x1024/111/F47521?text=Puzzle+X'" class="game-img">
                    </div>
                    <div class="p-4 bg-[#0a0a0a]">
                        <h3 class="text-lg font-black text-white uppercase italic truncate">Puzzle Verse</h3>
                        <button onclick="openDetailModal(3)" class="w-full mt-3 bg-gray-800 hover:bg-[#F47521] hover:text-black text-white font-bold py-2 rounded uppercase text-xs tracking-widest transition">Jugar</button>
                    </div>
                </div>
            </div>

            <!-- JUEGO 4 -->
            <div class="slider-item game-card-container group">
                <div class="game-card" id="card-4">
                    <div class="game-img-box">
                        <img src="Quiz4.png" onerror="this.src='https://placehold.co/1024x1024/111/F47521?text=Runner+2077'" class="game-img">
                    </div>
                    <div class="p-4 bg-[#0a0a0a]">
                        <h3 class="text-lg font-black text-white uppercase italic truncate">Cyber Runner</h3>
                        <button onclick="openDetailModal(4)" class="w-full mt-3 bg-gray-800 hover:bg-[#F47521] hover:text-black text-white font-bold py-2 rounded uppercase text-xs tracking-widest transition">Jugar</button>
                    </div>
                </div>
            </div>

            <!-- JUEGO 5 -->
            <div class="slider-item game-card-container group">
                <div class="game-card" id="card-5">
                    <div class="game-img-box">
                        <img src="Quiz5.png" onerror="this.src='https://placehold.co/1024x1024/111/F47521?text=Card+Battle'" class="game-img">
                    </div>
                    <div class="p-4 bg-[#0a0a0a]">
                        <h3 class="text-lg font-black text-white uppercase italic truncate">Card Battle</h3>
                        <button onclick="openDetailModal(5)" class="w-full mt-3 bg-gray-800 hover:bg-[#F47521] hover:text-black text-white font-bold py-2 rounded uppercase text-xs tracking-widest transition">Jugar</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- MODAL DE DETALLES (PASO PREVIO) -->
    <div id="detail-modal" class="modal-overlay">
        <div class="modal-box">
            <button onclick="closeDetailModal()" class="absolute top-4 right-4 text-gray-500 hover:text-white"><i class="fa-solid fa-xmark text-xl"></i></button>
            
            <div class="text-center mb-6">
                <div class="w-24 h-24 mx-auto bg-gray-800 rounded-xl mb-4 overflow-hidden border-2 border-[#F47521] shadow-lg">
                    <img id="modal-img" src="" class="w-full h-full object-cover">
                </div>
                <h2 id="modal-title" class="text-2xl font-black text-white uppercase italic">NOMBRE JUEGO</h2>
                <span class="text-xs text-gray-500 font-mono uppercase tracking-widest">Arcade 2D</span>
            </div>
            
            <p id="modal-desc" class="text-gray-300 text-sm mb-8 text-center leading-relaxed">
                Descripción del juego...
            </p>
            
            <button id="modal-play-btn" onclick="unlockAndPlay()" class="w-full bg-gradient-to-r from-[#F47521] to-red-600 text-white font-black uppercase py-4 rounded-lg shadow-lg hover:scale-105 transition-transform flex items-center justify-center gap-2">
                <i class="fa-solid fa-play"></i> INICIAR JUEGO
            </button>
            <p class="text-[10px] text-gray-500 text-center mt-3 flex items-center justify-center gap-1">
                <i class="fa-solid fa-ad"></i> Anuncio corto al iniciar
            </p>
        </div>
    </div>

    <!-- VISOR DE JUEGO (PANTALLA COMPLETA - AJUSTABLE) -->
    <div id="game-viewer" class="game-viewer-overlay">
        <div class="game-frame-container">
            <button onclick="closeGame()" class="close-game-btn"><i class="fa-solid fa-xmark"></i></button>
            <iframe id="game-iframe" src="" class="game-iframe"></iframe>
        </div>
    </div>

    <script>
        // URL DEL ANUNCIO
        const adUrl = "https://www.effectivegatecpm.com/m1ys4txk?key=24956a22bda5dca3b4086262eb4b5423";

        // DATOS DE LOS JUEGOS
        const gamesData = {
            1: {
                title: "Avalond: RPG",
                desc: "Explora el mundo mágico de Avalond en este RPG de aventuras 2D. Combate monstruos y sube de nivel.",
                img: "Quiz1.png",
                link: "https://pixworld.io/avalond" // Link Real
            },
            2: {
                title: "Trivia Otaku",
                desc: "Demuestra cuánto sabes de anime y manga. ¿Podrás responder las 100 preguntas sin fallar?",
                img: "Quiz2.png",
                link: "https://itch.io/embed-upload/123456?color=333333" 
            },
            3: {
                title: "Puzzle Verse",
                desc: "Arma los rompecabezas de tus portadas favoritas contra el reloj.",
                img: "Quiz3.png",
                link: "https://itch.io/embed-upload/654321?color=333333" 
            },
            4: {
                title: "Cyber Runner",
                desc: "Corre por los tejados de Neo-Tokyo esquivando drones de seguridad.",
                img: "Quiz4.png",
                link: "https://itch.io/embed-upload/987654?color=333333" 
            },
            5: {
                title: "Card Battle",
                desc: "Estrategia de cartas con los personajes de ComicVerse. Crea tu mazo definitivo.",
                img: "Quiz5.png",
                link: "https://itch.io/embed-upload/456789?color=333333" 
            }
        };

        let currentGameId = null;

        // Abrir Modal de Detalles
        function openDetailModal(id) {
            currentGameId = id;
            const data = gamesData[id];
            
            document.getElementById('modal-title').innerText = data.title;
            document.getElementById('modal-desc').innerText = data.desc;
            document.getElementById('modal-img').src = data.img;
            document.getElementById('modal-img').onerror = function(){ this.src='https://placehold.co/1024x1024/111/F47521?text=Game'; };
            
            document.getElementById('detail-modal').classList.add('active');
        }

        function closeDetailModal() {
            document.getElementById('detail-modal').classList.remove('active');
        }

        // Lógica de Desbloqueo y Juego
        function unlockAndPlay() {
            if(!currentGameId) return;

            // 1. Abrir Anuncio
            window.open(adUrl, '_blank');

            // 2. Cerrar modal detalle y Abrir juego inmediatamente
            closeDetailModal();
            openGameViewer(currentGameId);
        }

        function openGameViewer(id) {
            const viewer = document.getElementById('game-viewer');
            const iframe = document.getElementById('game-iframe');
            
            // Cargar el juego
            iframe.src = gamesData[id].link;
            
            viewer.classList.add('active');
            document.body.style.overflow = 'hidden'; // Bloquear scroll de la página
        }

        function closeGame() {
            const viewer = document.getElementById('game-viewer');
            const iframe = document.getElementById('game-iframe');
            
            iframe.src = ""; // Detener juego para que no suene de fondo
            viewer.classList.remove('active');
            document.body.style.overflow = 'auto'; // Restaurar scroll
        }
    </script>
</body>
</html>